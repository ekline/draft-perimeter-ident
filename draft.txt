


Home Networking                                                 E. Kline
Internet-Draft                                               Google Inc.
Intended status: Informational                          November 6, 2012
Expires: May 10, 2013


                       Default Border Definition
               draft-homenet-kline-default-perimeter-00+

Abstract

   Automatic, simple identification of when traffic is crossing a
   perimeter is highly desirable for a variety of home network uses.
   This document describes how to use homenet routing protocol
   adjancenies as the primary signal of a common administrative domain
   (e.g. "the home").  Classification of interfaces et cetera as
   internal or external follow from this, as do various policy and
   implementation implications.  One fundamental implication is that the
   active definition of a home network's interior is no more secure than
   its policy for forming homenet routing protocol adjacencies.

   TODO: Loop detection.

   TODO: Mention Mark's L2 security...

   TODO: Mark's VPN explicit mention

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 10, 2013.

Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.



Kline                     Expires May 10, 2013                  [Page 1]

Internet-Draft          Default Border Definition          November 2012


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . . . 3
   2.  XXX Terminology . . . . . . . . . . . . . . . . . . . . . . . . 3
   3.  Dynamically defining the border . . . . . . . . . . . . . . . . 4
     3.1.  Collect information about neighboring routers . . . . . . . 5
     3.2.  Classify next hops  . . . . . . . . . . . . . . . . . . . . 5
     3.3.  Classify interfaces . . . . . . . . . . . . . . . . . . . . 5
       3.3.1.  Mixed mode  . . . . . . . . . . . . . . . . . . . . . . 6
   4.  Fixed-category interfaces . . . . . . . . . . . . . . . . . . . 6
     4.1.  Examples  . . . . . . . . . . . . . . . . . . . . . . . . . 6
   5.  XXX Security stance . . . . . . . . . . . . . . . . . . . . . . 7
   6.  TODO  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
   7.  Fundamental recommendations . . . . . . . . . . . . . . . . . . 7
     7.1.  Network node default security practices . . . . . . . . . . 7
     7.2.  State changes and logging . . . . . . . . . . . . . . . . . 8
   8.  Useful perimeter signals  . . . . . . . . . . . . . . . . . . . 8
   9.  Security Considerations . . . . . . . . . . . . . . . . . . . . 8
   10. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 8
   11. IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 9
   12. References  . . . . . . . . . . . . . . . . . . . . . . . . . . 9
     12.1. Normative References  . . . . . . . . . . . . . . . . . . . 9
     12.2. Informative References  . . . . . . . . . . . . . . . . . . 9
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . . . 9















Kline                     Expires May 10, 2013                  [Page 2]

Internet-Draft          Default Border Definition          November 2012


1.  Introduction

   Automatic, simple identification of when traffic is crossing the
   homenet perimeter is highly desirable for a variety of home network
   uses.  This is a non-trivial task as it is tantamount to automated
   discovery of administrative boundaries.

   Many architectures make it difficult or impossible (by design) to
   detect administrative boundaries and rely on various mechanisms of
   user or administrator invention to create or modify such boundaries.
   Other hints about administrative boundaries can be insecure,
   unreliable, operationally impractical, or may place arbitrary
   requirements upon the architecture where previously no such
   requirement existed.

   This document describes how to use homenet routing protocol
   adjancenies as the primary signal of a common administrative domain
   (e.g. "the home").  Classification of interfaces et cetera as
   internal or external follow from this, as do various policy and
   implementation implications.  One fundamental implication is that the
   active definition of a home network's interior is no more secure than
   its policy for forming homenet routing protocol adjacencies.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].


2.  XXX Terminology

   Fundamentally the In order to address perimeter identification at a
   manageable scale the scope has been limited to discussing concepts of
   "interior", "exterior", and "perimeter".  Working definitions in use
   by this document are as follows.

   Internal/Interior
       The interior is broadly defined to include the collection of
       interfaces (physical or virtual), nodes, and forwarding next hops
       collectively under the control of a single logical administrative
       domain.  This document uses the homenet routing protocol
       adjacencies as a indicator of membership in the same logical
       administrative domain.







Kline                     Expires May 10, 2013                  [Page 3]

Internet-Draft          Default Border Definition          November 2012


   External/Exterior
       The exterior is broadly defined to include all interfaces
       (physical or virtual), nodes, and forwarding next hops
       collectively NOT under the control of any single logical
       administrative domain and specifically NOT under the control of
       the administrative domain which defines the interior.

   Documents may reference any of the terms "internal", "interior",
   "external", or "exterior" as required by grammar (adjective versus
   noun use cases).

   Additionally, some implementations MAY choose to support handling
   questionable home network configurations which result in an interface
   qualifying for both interior and exterior classification
   simultaneously.  Requirements for this are discussed further below.

   XXX Expressly not discussed herein are architectures having multiple
   interior networks, nor the relationships between them as separate
   from their relationship to their common exterior or any common
   perimeter.  The architectures under discussion have a single
   interior, single exterior, and a single logical perimeter between
   them.


3.  Dynamically defining the border

   Homenet routers may support interfaces which attempt to learn the
   nature of their relationship to neighboring routers, and determine
   where the border between the "interior" and the "exterior" lies.

   Interfaces which have not yet determined their categorization may
   consider themselves to be in a "learning" state, where no traffic is
   routed but probing continues.  Once nodes of any kind (e.g. either
   routers or hosts) are detected, classification takes place and the
   router exits the "learning" state.

   The classification algorithm documented here is roughly:

   1.  Continously collect information on all interfaces about
       neighboring routers (including manually configured routers).

   2.  Classify next hops as either "internal" or "external" primarily
       by homenet router protocol adjacency status.

   3.  Classify interfaces according to the nature of their next hops.

   Manually configured next hops MUST also have their classification as
   either "internal" or "external" explicitly specified.  As such, they



Kline                     Expires May 10, 2013                  [Page 4]

Internet-Draft          Default Border Definition          November 2012


   can be considered to be of a fixed category, and on-going evaluation
   is NOT required.

   Policies of various sorts can be applied and updated as appropriate
   based on these classifications, as and when they are determined.

3.1.  Collect information about neighboring routers

   An interface (physical or virtual) which is configured to dynamically
   assess its internal or external classificaton MUST periodically probe
   for routing information on the link.  This includes sending Router
   Solicitations, DHCPv6 Prefix Delegation requests, and probing for
   homenet routing protocol-capable nodes.

   Probing for routing information MUST be performed whenever the
   interface is logically up.  The periodicity of probes is protocol-
   dependent (e.g. subject to Router Advertisement lifetimes, DHCPv6
   lease timers, or homenet routing protocol timers).  Wherever
   possible, implementations SHOULD limit the impact of probing by
   implementing mechanisms like exponential backoff.

3.2.  Classify next hops

   Routing information is used to categorize next hops as either
   "internal" or "external".

   Routers with which a homenet routing protocol adjacency is
   successfully established MUST be considered "internal".

   Routers of which this homenet router has knowledge but with which no
   homenet routing protocol adjacency is successfully establish AND from
   which no routing information is learned SHOULD be considered
   "internal".  This includes "downstream" routers for which the homenet
   router is acting as the Delegating Router via a DHCPv6 Prefix
   Delegation exchange.

   All other routers with which no homenet routing protocol adjacency is
   successfully established MUST be considered "external".

3.3.  Classify interfaces

   An interface with no "external" next hops SHOULD be categorized as
   "internal".  This includes interfaces serving leaf networks
   consisting only of hosts, an interface which has "downstream" routers
   for which this router is a Delegating Router, an interface with only
   homenet routing protocol adjacent peers, or any combination thereof.

   An interface with next hops all of which are categorized as



Kline                     Expires May 10, 2013                  [Page 5]

Internet-Draft          Default Border Definition          November 2012


   "external" MUST be categorized as "external".

3.3.1.  Mixed mode

   Some devices MAY choose to support handling questionable home network
   configurations which result in an interface having both interior and
   exterior next hops simultaneously.  This can happen if, for example,
   two homenet routers form an adjacency with each other over the same
   interface they use for communicating to "upstream" ISP routers.

   All homenet routers, whether this configuration is considered
   supported or not, MUST administratively log and provide product-
   relevant notification of this configuration, preferrably with
   recommendations for resolution.


4.  Fixed-category interfaces

   Interfaces (physical or virtual) which have product-defined purposes
   or are otherwise permanently categorized by the homenet router
   implementation as exclusively "internal" or exclusively "external" do
   not require any algorithm to determine their categorization.

   Homenet routers MUST restrict relevant traffic on fixed-category
   interfaces according to their categorizations.  Specifically, they
   MUST NOT originate traffic which could result in re-categorizing the
   interface IF the interface were dynamically attempting to learn its
   categorization.  For example, a fixed "external" interface MUST NOT
   attempt to participate in the homenet routing protocol.  Similarly,
   fixed "internal" interfaces must not issue DHCPv6 Prefix Delegation
   requests.

4.1.  Examples

   Examples of product-defined interfaces include home router interfaces
   which are labeled for their intended use, e.g.  RJ-45 ports labeled
   "WAN" and "LAN" or symbols indicating "The Internet" and "inside the
   home".  Other examples include wireless routers with defined separate
   WLAN "home" and "guest" ESSIDs.

   Another set of examples of product-defined, fixed category interfaces
   are those which require subscriber credentials in order for that
   interface to successfully pass general purpose traffic.  These
   include authenticated PPPoE sessions and 3G/LTE PDP contexts (e.g.
   requiring a SIM card associated with a valid customer account).
   These SHOULD be classified as "exterior".

   Similarly, an implementation may consider the interface a mobile



Kline                     Expires May 10, 2013                  [Page 6]

Internet-Draft          Default Border Definition          November 2012


   device uses to provide service to "tethering" clients to be a fixed-
   category interface.  Such interfaces SHOULD be classified as
   "interior".


5.  XXX Security stance

   filter policies that enable good things, ICMPv6+zospf+dhcpv6+...

   All interior interfaces can apply stateless filters (internal routing
   changes shouldn't break internal flows): deny from:!{homenets} to:
   !{homenets} permit all

   All exterior interfaces can apply stateful filters permit from:
   {homenets} to:!{homenets} permit from:!{homenets} to:{homenets}
   established deny all

   Mixed interfaces can apply stateless filters to internal traffic.
   This permits spoofed source address packets sent from the exterior to
   the interior to bypass stateful filtering. permit from:{homenets} to:
   !{homenets} permit from:!{homenets} to:{homenets} established permit
   from:{homenets} to:{homenets} deny all


6.  TODO

   BREAK


7.  Fundamental recommendations

   The application of security policies at the perimeter and possible
   relaxation of security policies within the interior are apt to have
   administrative consequences.  Some fundamental recommendations for
   nodes operating in this environment follow.

   Implementors should remain mindful of recommended practices, e.g.
   RFC 4864 [RFC4864], RFC 4890 [RFC4890], RFC 6092 [RFC6092], et
   cetera.

7.1.  Network node default security practices

   By default all network nodes SHOULD follow best current security
   practices.  Any node may at times find itself in a hostile
   environment.  This is obviously true of mobile nodes when, for
   instance, connecting to a variety of public "Wi-Fi" networks.  In
   such environments mobile nodes cannot be sure that there is any
   network device acting in the mobile node's own best security



Kline                     Expires May 10, 2013                  [Page 7]

Internet-Draft          Default Border Definition          November 2012


   interests with respect to others on the local network.

   It is equally true of more traditionally "fixed" nodes: any
   compromised neighbor nodes ("fixed" or mobile) may be used as a
   conduit for further compromise.  Indeed, one study of a captured
   "botnet" ([TORPIG], section 5.2.4) found that roughly 78.9% of
   infected hosts had RFC 1918 [RFC1918] addresses, commmonly used in
   IPv4 NAT deployments.

7.2.  State changes and logging

   Devices conforming to this and other homenet documents MUST
   continuously evaluate the interior, exterior, and perimeter
   classifications of interfaces and traffic.  These may change at any
   time, for example if new devices are added into the network or a
   power event causes all equipment to reset, and specific ordering of
   device bring-up within a homenet network MAY NOT be assumed.

   Nodes compliant with this and other homenet documents SHOULD
   administratively log the perimeter classification of interfaces (both
   physical and virtual), the reason(s) for such classification, and
   times at which such classifications are made or changed.


8.  Useful perimeter signals

   Nevertheless there are some signals that may be useful.  Which
   signals are available and useful vary with the access architecture,
   and in some cases there may be virtually no reliable information to
   securely determine a perimeter.  An physically or cryptographically
   authenticated routing protocol may be the highest fidelity signal for
   determining the interior, and thereby the exterior and perimeter.


9.  Security Considerations

   All drafts are required to have a security considerations section.
   See RFC 3552 [RFC3552] for a guide.


10.  Acknowledgements

   Many thanks for the constructive input and criticism of Shwetha
   Bhandari, Lorenzo Colitti, Markus Stenberg, Mark Townsley, and Ole
   Troan.

   Thanks also must go to pleasant, peaceful and productive trips on the
   Japan Rail (JR) Shinkansen ("bullet train").



Kline                     Expires May 10, 2013                  [Page 8]

Internet-Draft          Default Border Definition          November 2012


11.  IANA Considerations

   This memo includes no request to IANA.


12.  References

12.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

12.2.  Informative References

   [RFC1918]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and
              E. Lear, "Address Allocation for Private Internets",
              BCP 5, RFC 1918, February 1996.

   [RFC3552]  Rescorla, E. and B. Korver, "Guidelines for Writing RFC
              Text on Security Considerations", BCP 72, RFC 3552,
              July 2003.

   [RFC4864]  Van de Velde, G., Hain, T., Droms, R., Carpenter, B., and
              E. Klein, "Local Network Protection for IPv6", RFC 4864,
              May 2007.

   [RFC4890]  Davies, E. and J. Mohacsi, "Recommendations for Filtering
              ICMPv6 Messages in Firewalls", RFC 4890, May 2007.

   [RFC6092]  Woodyatt, J., "Recommended Simple Security Capabilities in
              Customer Premises Equipment (CPE) for Providing
              Residential IPv6 Internet Service", RFC 6092,
              January 2011.

   [TORPIG]   Stone-Gross, B., "Your Botnet is My Botnet: Analysis of a
              Botnet Takeover", 2009, <http://www.cs.ucsb.edu/~seclab/
              projects/torpig/torpig.pdf>.














Kline                     Expires May 10, 2013                  [Page 9]

Internet-Draft          Default Border Definition          November 2012


Author's Address

   Erik Kline
   Google Inc.
   Roppongi 6-10-1, 26th Floor
   Minato, Tokyo  106-6126
   JP

   Phone: +81 03 6384 9000
   Email: ek@google.com









































Kline                     Expires May 10, 2013                 [Page 10]

